{% extends 'base.html' %} 
{% block head %}
<title>Update Record</title>
{% endblock %} 

{% block body %}
<div class="content">
  <h1>Update Medical Record</h1>

  <form action="/update_record/{{ record.id }}" method="POST">
    <!-- Patient dropdown with pre-selected value -->
    <select name="patient_id" required>
      <option value="">Select Patient</option>
      {% for patient in patients %}
        <option value="{{ patient.id }}" {% if patient.id == record.patient_id %}selected{% endif %}>
          {{ patient.username }}
        </option>
      {% endfor %}
    </select>

    <!-- Optional Nurse dropdown -->
    {% if nurses %}
    <select name="nurse_id" required>
      <option value="">Select Nurse</option>
      {% for nurse in nurses %}
        <option value="{{ nurse.id }}" {% if nurse.id == record.nurse_id %}selected{% endif %}>
          {{ nurse.username }}
        </option>
      {% endfor %}
    </select>
    {% endif %}

    <input
      type="text"
      name="symptoms"
      placeholder="Symptoms"
      value="{{ decrypt(record.symptoms).decode() }}"
      required
    />
    <input
      type="text"
      name="diagnosis"
      placeholder="Diagnosis"
      value="{{ decrypt(record.diagnosis).decode() }}"
      required
    />
    <input type="text" name="keywords" placeholder="Searchable Keywords" />
    <input type="submit" value="Update Record" />
  </form>
</div>
{% endblock %}
